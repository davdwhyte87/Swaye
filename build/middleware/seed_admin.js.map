{"version":3,"sources":["../../middleware/seed_admin.js"],"names":["Admin","require","bcrypt","module","exports","req","res","next","find","exec","then","admins","adm","process","env","admin","hash","password","err","console","log","status","json","code","error","_id","mongoose","Types","ObjectId","name","email","save","message","data","catch"],"mappings":";;AAAA,IAAMA,QAAMC,QAAQ,iBAAR,CAAZ;AACA,IAAMC,SAAOD,QAAQ,QAAR,CAAb;;AAGAE,OAAOC,OAAP,GAAe,UAACC,GAAD,EAAKC,GAAL,EAASC,IAAT,EAAgB;AAC3BP,UAAMQ,IAAN,GAAaC,IAAb,GAAoBC,IAApB,CAAyB,kBAAQ;AAC7B,YAAG,CAACC,MAAJ,EAAW;AACP,gBAAIC,MAAIC,QAAQC,GAAR,CAAYC,KAApB;AACAb,mBAAOc,IAAP,CAAYJ,IAAIK,QAAhB,EAAyB,EAAzB,EAA4B,UAACC,GAAD,EAAKF,IAAL,EAAY;AACpC,oBAAGE,GAAH,EAAO;AACHC,4BAAQC,GAAR,CAAYF,GAAZ;AACA,2BAAOZ,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,MAAK,CAAN,EAAQC,OAAMN,GAAd,EAArB,CAAP;AACH;AACD,oBAAIH,QAAMf,MAAM;AACZyB,yBAAI,IAAIC,SAASC,KAAT,CAAeC,QAAnB,EADQ;AAEZC,0BAAKjB,IAAIiB,IAFG;AAGZC,2BAAMlB,IAAIkB,KAHE;AAIZb,8BAASD;AAJG,iBAAN,CAAV;AAMAD,sBAAMgB,IAAN,GAAarB,IAAb,CAAkB,iBAAO;AACrB,2BAAOJ,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,MAAK,CAAN,EAAQS,SAAQ,eAAhB,EAAgCC,MAAKlB,KAArC,EAArB,CAAP;AACH,iBAFD,EAGCmB,KAHD,CAGO,iBAAO;AACVf,4BAAQC,GAAR,CAAYI,KAAZ;AACA,2BAAOlB,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,MAAK,CAAN,EAAQS,SAAQ,kBAAhB,EAAmCR,OAAMA,KAAzC,EAArB,CAAP;AACH,iBAND;AAOH,aAlBD;AAmBH;AACJ,KAvBD,EAwBCU,KAxBD,CAwBO,iBAAO;AACVf,gBAAQC,GAAR,CAAYI,KAAZ;AACA,eAAOlB,IAAIe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,MAAK,CAAN,EAAQS,SAAQ,kBAAhB,EAAmCR,OAAMA,KAAzC,EAArB,CAAP;AACH,KA3BD;AA4BH,CA7BD","file":"seed_admin.js","sourcesContent":["const Admin=require('../models/Admin')\r\nconst bcrypt=require('bcrypt')\r\n\r\n\r\nmodule.exports=(req,res,next)=>{\r\n    Admin.find().exec().then(admins=>{\r\n        if(!admins){\r\n            var adm=process.env.admin\r\n            bcrypt.hash(adm.password,10,(err,hash)=>{\r\n                if(err){\r\n                    console.log(err)\r\n                    return res.status(500).json({code:0,error:err})\r\n                }\r\n                var admin=Admin({\r\n                    _id:new mongoose.Types.ObjectId(),\r\n                    name:adm.name,\r\n                    email:adm.email,\r\n                    password:hash\r\n                })\r\n                admin.save().then(admin=>{\r\n                    return res.status(200).json({code:1,message:\"Admin created\",data:admin})\r\n                })\r\n                .catch(error=>{\r\n                    console.log(error)\r\n                    return res.status(500).json({code:0,message:\"An error occured\",error:error})\r\n                })\r\n            })  \r\n        }\r\n    })\r\n    .catch(error=>{\r\n        console.log(error)\r\n        return res.status(500).json({code:0,message:\"An error occured\",error:error})\r\n    })\r\n}\r\n"]}